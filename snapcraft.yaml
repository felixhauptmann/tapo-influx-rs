name: tapo-influx-rs
version: '0.1.0'
grade: devel

summary: A binary application for recording power metrics generated by Tapo devices
description: This snap provides a daemon that retrieves energy usage data from TP-Link Tapo P110 smart plugs and uploads it to an InfluxDB database.

confinement: strict
base: core20

build-packages:
  - pkg-config
  - libssl-dev

parts:
  tapo-influx-rs:
    plugin: rust
    source: .

apps:
  tapo-influx-rs-daemon:
    command: bin/tapo-influx-rs ./config.toml
    plugs:
      - network
    daemon: simple